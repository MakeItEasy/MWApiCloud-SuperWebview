<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>列表</title>
        <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width"/>
        <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
        <link rel="stylesheet" type="text/css" href="../css/list.css">
        <link rel="stylesheet" type="text/css" href="../css/api.css" />
        <link rel="stylesheet" type="text/css" href="../css/box.css" />
        <script type="text/javascript" src="../script/public.js"></script>
        <script type="text/javascript" src="../script/jquery-3.1.1.min.js"></script>
        <style>
            p{
                color:#999;
                padding:5px;
            }
        </style>
        <script>
            var token = '';
            apiready = function(){
                getToken();
            };

            function getToken() {
                api.accessNative({
                        name: 'loadToken',
                        extra: ''
                    }, function(resp){
                        token = resp.token;
                        requestList();
                });
            }

            <!--http://testwz.zhongyinginfo.com/wz/api/patient/v1/EMR/My/EMRList-->
            function requestList() {
                api.ajax({
                    url: 'http://192.168.5.12:9101/wz/api/patient/v1/EMR/My/EMRList',
                    method: 'get',
                    headers: {
                        Authorization: token, APIType: '1'
                    }
                    }, function(ret, err) {
                        if (ret) {
                            var listData = ret.list;
                            var str = '';
                                    for(var i=0;i<listData.length;i++){
                                        str += '<div class="list">'+
                                                    '<img src="'+listData[i].doctorPhotoUrl+'" width="50px" height="50px" alt="">'+
                                                    '<p>'+listData[i].doctorName+'</p>'+
                                                '</div>';
                                    }
                                    $('.wrapper').html(str);
                        } else {
                            api.alert({ msg: JSON.stringify(err) });
                        }
                });
            }
        </script>
    </head>
    <body>
    <div id="wrap">
        <div id='header'>
            <div class="back" tapmode="back-active" onclick="api.closeWin()" >返回</div>
            <h1>列表</h1>
            <div class="adpt" ></div>
        </div>
        <div class="wrapper">

        </div>
    </div>
    </body>
</html>
